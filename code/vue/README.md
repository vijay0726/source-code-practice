# 

#### 框架设计的权衡

命令式和声明式各有优缺点，在框架设计方面，则体现在性能与可维护性之间的权衡。

理论上命令式可以做到极致的性能优化。

命令式代码：需要维护实现目标的整个过程
声明式代码：可以“忽视”过程，只关注结果

声明式代码的性能消耗 = 做到极致性能优化的命令式代码的性能消耗 + “明确差异（diff）”的性能消耗

p4 描述不够严谨。

｜innerHTML｜虚拟DOM｜原生JS｜
｜---｜---｜---|
｜心智负担中等｜心智负担小｜心智负担大 |
｜性能差｜可维护性强 | 可维护性差 |
｜     ｜性能不错｜ 性能高 |

thinking:

如何做到既“声明式的描述UI”又具备原生JavaScript的性能？

#

开发体验
控制体积
良好的tree-shaking(esm effect)
输出什么样的构建产物（iife, esm, cjs）
特性开关
错误处理
良好的TypeScript支持 （如何衡量一个框架对TS类型支持友好？使用TS编写代码和对TS类型支持友好是两回事）



#### Vue.js 3 核心思路

声明式描述UI
 - 模版声明 （可读性强）
 - js对象声明 （灵活）
渲染器 （渲染器的精髓在于“更新节点”的阶段）
编译器 （对于编译器来说，模版就是一个普通的字符串，会分析该字符串，生成一个功能相同的渲染函数）

#### 响应系统

- 非原始值的响应式方案
- 原始值的响应式方案

2个基本概念： 响应式数据，副作用函数

p70 实现computed这里，关于effect函数的scheduler用法有误？
effect函数在设置scheduler的情况下，不应该在scheduler中调用执行实际的副作用函数吗，为什么这里只是针对dirty（是否重新执行封装过的effectFn）做了处理，而没有执行实际的副作用函数？
